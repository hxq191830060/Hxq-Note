![1](../0.图片/p\2.png)

* 生产环境至少要求三个节点
  
  * leader：可以读写
  * follower：只能读，写要转发给leader
  * observer
  
* **全局数据一致**：Zookeeper集群中所有的节点保存有相同的数据

* **读操作**：不需要与集群交互，Client直接从连接的节点上读取

* **写操作**：写入必须由leader处理

  1. 所有的写事务请求都必须由leader处理，Follower将写请求转发给leader

     leader将写事务转换为一个Proposal(提议)，并为其生成一个全局递增的唯一ID，这个ID就是事务ID（ZXID），leader按照ZXID的大小进行Proposal的排序和处理

  2. leader将Proposal转发给所有的Follower

  3. follower收到Proposal后，首先会以**事务日志**写入本地磁盘，并且在成功后返回leader一个**ACK响应**

  4. leader只要收到板书follower的ACK响应，就会广播一个**Commit消息**给follower，以通知其进行Proposal的提交，同时leader自身完成Proposal的提交

