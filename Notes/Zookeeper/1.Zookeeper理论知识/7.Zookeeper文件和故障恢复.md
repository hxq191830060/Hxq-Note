1. Zookeeper集群中每个服务器都会在内存中保持state image——让组成集群的服务器们互相知道彼此的存在

2. 每个Server都会持久化存储**事务日志**和**内存数据库的快照**



**故障恢复**

Zookeeper通过事务日志和数据快照来避免因为服务器故障而导致的数据丢失

* **事务日志**

  follower和leader在写数据前，会先把写操作记录到磁盘上的事务日志中，然后才会更新内存数据库中的数据

* **数据快照**

  周期性地采用深度优先搜索的方式将内存中的树形结构数据存入磁盘上的快照文件中