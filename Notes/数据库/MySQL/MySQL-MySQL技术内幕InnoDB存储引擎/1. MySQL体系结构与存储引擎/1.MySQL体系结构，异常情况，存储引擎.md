#### 1.数据库与数据库实例

* **数据库**

  数据库是文件的集合

* **数据库实例**

  数据库实例是程序，用户对数据库数据的任何操作，都要通过数据库实例来完成

* **参数读取**

  MySQL启动时，会读取配置文件里面的参数，如果多个配置文件有同一个参数，那么以最后一个读取的文件为准

  * **参数datadir**

    指定了数据库所在的路径，可通过以下SQL查看

    ```
    show variables like 'datadir';
    ```



#### 2.使用InnoDB存储引擎的MySQL的体系结构
![7](../0.picture/10.png)

#### 3. 异常情况

* **磁盘**：持久层，里面的数据不会丢失
* **内存**：数据不持久，如果数据库发生宕机，那么内存中的数据都会丢失
* **OS Buffer**：数据库宕机不会影响OS Buffer，但是操作系统宕机会导致OS Buffer中的数据丢失



#### 4. MySQL存储引擎

**MySQL采用插件式的存储引擎结构**

* **InnoDB**
  * 支持事务
  * 实现了行锁(读数据默认不加锁)
  * 支持外键
  * 实现了4种事务隔离等级，默认为REPEATABLE  
  * 采用**多版本并发控制(MVCC)** 来获得高并发性  
  * 使用**next-key-locking**来避免幻读的产生  
  * 提供 插入缓冲，二次写，自适应哈希索引，预读等功能  
  * **使用聚簇索引**——表数据的存储按照主键的顺序存放——一定有主键   
    如果提供主键，那么主键作为聚簇索引来存储表数据   
    如果没有提供主键，那么自动生成6字节的ROWID来作为主键   
* **MySIAM**
  * 不支持事务
  * 不支持外键
  * 只有表锁  
  * 存储引擎的缓存池只缓存 索引文件，不缓存数据文件   
  * 采用**非聚簇索引**，可以没有主键，索引文件与数据文件分离  ——所以MySIAM存储引擎表有MYD和MYI两种文件，MYD为数据文件，MYI为索引文件  
