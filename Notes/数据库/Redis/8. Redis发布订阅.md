* Redis发布定于(pub/sub)是一种消息通信模式：发送者(pub)发送信息，订阅者(sub)接受信息

* Redis不会对之前的消息做持久化，所以后来的订阅者无法收到之前的消息

![发布订阅](D:\桌面\Notes\Notes\数据库\Redis\p\发布订阅.png)



Redis提供了命令用于构建即使通信应用

| 命令                                 | 介绍                        |
| ------------------------------------ | --------------------------- |
| psubscribe pattern [pattern ...]     | 订阅符合给定模式的频道      |
| pubsub subcommand [argu [argu...] ]  | 查看订阅与发布系统状态      |
| publish channel message              | 将信息发送到指定频道        |
| punsubscribe [pattern [pattern ...]] | 退订符合给定模式的频道      |
| subscribe channel [channel ...]      | 订阅指定频道                |
| unsubscribe [channel [channel ...] ] | 退订指定频道                |
| pubsub channels [pattern]            | 查看活跃频道(至少1个订阅者) |
| pubsub numsub [channel ...]          | 查看频道订阅数              |
| pubsub numpat                        | 查看模式订阅数              |



**原理**

redis-server内维护了一个字典，字典的key就是一个个channel，字典的值是一个链表，链表中保存了所有订阅这个channel的客户端

向订阅者发送消息时，redis-server使用给定的channel作为key，在它所维护的channel字典中查找订阅了该channel的所有客户端的链表，然后遍历这个链表，将消息发布给所有订阅者

