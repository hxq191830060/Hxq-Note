1. 服务A先把消息持久化到本地数据库，并把状态设为待发送；
2. 服务A把消息发送到消息队列当中；
3. 服务B从消息队列获取消息并执行；
4. 服务B如果执行成功，则发送一个消息到消息队列响应服务A，如果失败，则不操作；
5. 服务A从消息队列获取响应结果；
6. 更改本地数据库对应的消息状态，改为完成；
7. 有一个定时任务，从本地数据库查找消息状态为未完成的，并重新投递到消息队列当中