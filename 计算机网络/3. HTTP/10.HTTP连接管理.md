**短连接**

HTTP/0.9，HTTP/1.0是短连接

三次握手建立连接——一次“请求—响应”——断开连接

**长连接**

HTTP/1.1后默认为长连接

三次握手建立连接——多次"请求—响应"——断开连接

![img](p/4.png)

HTTP/1.1默认启用长连接，不需要特殊的头字段指定，只要向服务器发送了第一次请求，后续的请求都会重复利用第一次打开的TCP连接

* 我们也可以在请求头里面明确要求使用长连接：**Connection:keep-alive**

* 不管Client是否请求长连接，如果服务器支持长连接，它总会在响应报文头里放入**Connection:keep-alive**，来告诉客户端自己支持长连接

* **Connection:close**表示长连接即将关闭
  
  客户端可以在请求头中加上**Connection:close**来告诉服务器——这次通信后就关闭连接
  
  服务器看到这个字段，就知道Client要主动关闭连接，于是在响应报文头中也会加上**Connection:close**

**队头阻塞问题**

HTTP采用"请求-应答"模型——HTTP规定报文必须"一发一收"——形成一个FIFO的队列，按照先后顺序处理

如果队首的请求耗时过程，后面的请求就会阻塞，等待更长时间

* 解决途径
  
  * 并发连接
    
    一个客户端可以对**一个域名**发起多个连接（HTTP和游览器限制并发连接数）
  
  * 域名分片
    
    多个域名指向同一台服务器