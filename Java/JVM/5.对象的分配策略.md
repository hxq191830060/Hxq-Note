* Java堆的内存模型  
  ![alt 属性文本](p/img_11.png)   
* 对象优先分配在Eden中，如果Eden没有足够的空间，那么进行一次MinorGC  
* 大对象直接进入老年代(例如很长的字符串or元素数量很庞大的数组)
* 长期存活的对象进入老年代   
  JVM给每个对象定义了一个年龄计数器(Age)，存储在对象头中   
  对象通常在Eden中诞生，如果经过一次MinorGC后，对象仍存活   
  如果对象不能被Survivor容纳，那么直接进入老年代  
  如果对象能被Survivor容纳，那么进入Survivor，Age设为1，对象在Survivor中每熬过一次MinorGC，Age到达一定值(默认15，可以设置),进入老年代  
* 动态年龄判定  
  Survivor区中相同年龄的对象，如果其大小之和占到了 To Survivor区一半以上的空间，那么大于此年龄的对象会直接进入老年代   
* **空间分配担保**   
  发生YGC前，JVM先检查老年代最大可用的连续空间 是否> 新生代所有对象总空间   
  * 如果大于，那么这次YGC安全
  * 如果不成立，说明YGC不安全，JVM查看HandlePromotionFailure参数，查看是否允许担保失败   
     * 如果允许，检查老年代最大可用的连续空间 是否> 历次晋升到老年代对象的平均大小  
       * 如果大于，进行一个YGC
       * 否则，进行一次FullGC  
     * 如果不允许，进行一次FGC
