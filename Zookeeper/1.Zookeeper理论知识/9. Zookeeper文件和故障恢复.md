**故障恢复**

Zookeeper通过事务日志和数据快照来避免因为服务器故障而导致的数据丢失

* **事务日志**

  follower和leader在写数据前，会先把写操作记录到磁盘上的事务日志中，然后才会更新内存数据库中的数据

* **内存数据库数据快照**

  周期性地采用深度优先搜索的方式将内存中的树形结构数据存入磁盘上的快照文件中